<ng-template #addTag let-data let-ref="dialogRef">
    <div class="row">
        <div class="col-md-12">
            <nb-card status="success" [nbSpinner]="editSpinner">
                <nb-card-header>
                    Add new tag: {{ data?.title }}
                </nb-card-header>
                <nb-card-body>
                    <form #adTagForm="ngForm" name="addTag" id="adTagForPost">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="label" for="title">Title:</label>
                                <input #title="ngModel" [(ngModel)]="data.title" minlength="4" nbInput name="title"
                                    type="text" status="success">
                                <div *ngIf="title.invalid && (title.dirty || title.touched)">
                                    <nb-alert *ngIf="title.errors.required" status="warning">Title is required
                                    </nb-alert>
                                    <nb-alert *ngIf="title.errors.minlength" status="warning">Title must be at
                                        least 4
                                        characters long.</nb-alert>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label class="label" for="description">Description:</label>
                                <input #description="ngModel" [(ngModel)]="data.description" minlength="4" nbInput
                                    name="description" type="text" status="success">

                                <div *ngIf="description.invalid && (description.dirty || description.touched)">
                                    <nb-alert *ngIf="description.errors.required" status="warning">description is
                                        required
                                    </nb-alert>
                                    <nb-alert *ngIf="description.errors.minlength" status="warning">description must be
                                        at
                                        least 4
                                        characters long.</nb-alert>
                                </div>


                            </div>
                        </div>
                    </form>
                </nb-card-body>
                <nb-card-footer>
                    <button [disabled]="!adTagForm.dirty || !adTagForm.valid" type="button" (click)="ref.close(data)"
                        nbButton status="success">Add</button>
                </nb-card-footer>
            </nb-card>
        </div>
    </div>
</ng-template>


<div class="row">
    <div class="col-md-12">
        <nb-card status="success">
            <nb-card-header>
                Edit post:
            </nb-card-header>
            <nb-card-body>
                <form #newPostForm="ngForm">
                    <div class="row d-flex ">
                        <div class="col-md-6">
                            <label for="title" class="label">Title:</label>

                            <input required minlength="4" #postTitle="ngModel" fullWidth name="title" id="title"
                                type="text" nbInput status="primary" placeholder="Post title" required
                                [(ngModel)]="post.title">

                            <div *ngIf="postTitle.invalid && (postTitle.dirty || postTitle.touched)">
                                <nb-alert *ngIf="postTitle.errors.required" status="warning">Title is required.
                                </nb-alert>
                                <nb-alert *ngIf="postTitle.errors.minlength" status="warning">Title must be at
                                    least 4
                                    characters long.</nb-alert>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="description" class="label">Description:</label>
                            <input #postDesc="ngModel" required minlength="4" name="description" id="descrip"
                                type="text" nbInput status="primary" placeholder="Description" fullWidth required
                                [(ngModel)]="post.description">

                            <div *ngIf="postDesc.invalid && (postDesc.dirty || postDesc.touched)">
                                <nb-alert *ngIf="postDesc.errors.required" status="warning">Description is required.
                                </nb-alert>
                                <nb-alert *ngIf="postDesc.errors.minlength" status="warning">Description must be at
                                    least 4
                                    characters long.</nb-alert>
                            </div>
                            <input type="hidden" name="userid" [(ngModel)]="post.userid">

                        </div>
                    </div>

                    <br>

                    <div class="row ">
                        <div class="col-lg-12 col-md-12">
                            <ckeditor [editor]="editEditor" #mytext name="text" (data)="post.text"
                                [(ngModel)]="post.text">
                            </ckeditor>
                        </div>
                        <!-- <ckeditor [config]="{ extraPlugins: 'divarea', height: '320' }"></ckeditor> -->
                    </div>
                    <!--    <div class="row">
                        <nb-select multiple name="postTag" [(ngModel)]="post.tagId" placeholder="Select Tags">
                            <nb-option *ngFor="let tag of tags" value="{{ tag.id }}">
                                {{ tag.title }}
                            </nb-option>
                        </nb-select>

                        <button nbButton type="button" size="tiny" status="success">
                            <nb-icon icon="plus"></nb-icon>
                        </button>

                    </div> -->

                    <div class="col-md-6">
                        Tags
                        <button (click)="openAddTagDialog(addTag)" nbButton type="button" size="tiny" status="success">
                            <nb-icon icon="plus"></nb-icon>
                        </button>
                    </div>
                    <div class="col-md-6">
                        <div *ngFor="let tag of post.tags">
                            {{ tag.title }}
                            <button nbButton size="tiny" status="danger" (click)="removeTag(tag.id)">-</button>
                        </div>
                    </div>
                </form>
                <br>
                <div class="row">
                    <button status="success" nbButton (click)="editItem(post.id, post)">Update
                        post!</button>
                </div>

            </nb-card-body>



        </nb-card>
    </div>
</div>