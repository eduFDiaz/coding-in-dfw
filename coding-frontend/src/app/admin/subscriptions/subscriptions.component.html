<!-- Generic Delete Dialog -->
<ng-template #dialogDelete let-data let-ref="dialogRef">
    <nb-card status="danger">
        <nb-card-header>Do you want to delete this subscriber?</nb-card-header>
        <nb-card-body>This action cant be undone!
        </nb-card-body>
        <nb-card-footer>
            <button nbButton (click)="deleteSubscriber(data.data); ref.close()" status="danger">Delete!</button>
        </nb-card-footer>
    </nb-card>
</ng-template>

<!-- Generic Add Dialog -->
<ng-template #dialogAdd let-data let-ref="dialogRef">
    <nb-card status="success">
        <nb-card-header>Add new subscription email</nb-card-header>
        <nb-card-body>
            <form #newSubForm="ngForm" name="newSubForm">
                <label class="label" for="email">Email:</label><br>
                <input [(ngModel)]="newSub" nbInput type="text" name="email" status="success"><br>

            </form>
        </nb-card-body>
        <nb-card-footer>
            <button nbButton (click)="addSubs(newSubForm.value); ref.close();" status="success">Add!
            </button>
        </nb-card-footer>
    </nb-card>
</ng-template>


<!-- Main structure -->
<div class="row">
    <div class="col-md-12">
        <nb-card [nbSpinner]="spinner" nbSpinnerStatus="success">
            <nb-card-header>
                <div class="row">
                    <div class="col-md-7">
                        Your subscribers:
                        <button (click)="openAddDialog(dialogAdd)" nbButton status="success" size="tiny">
                            <nb-icon icon="plus-outline"></nb-icon>
                        </button>
                    </div>
                </div>
            </nb-card-header>
            <nb-card-body>
                <div class="row">
                    <div class="col-md-12">
                        <nb-list>
                            <nb-list-item *ngFor="let sub of subscribers">
                                <div class="col-md-10">
                                    <div class="col-md">
                                        <a href="mailto:{{ sub.email }}">{{ sub.email }}</a>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="row">
                                        <div class="col-md">
                                            <button (click)="openDeleteDialog(dialogDelete, sub.id)" nbButton
                                                status="danger" size="tiny">
                                                <nb-icon icon="trash"></nb-icon>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </nb-list-item>
                        </nb-list>
                    </div>
                </div>
            </nb-card-body>
        </nb-card>
    </div>
</div>